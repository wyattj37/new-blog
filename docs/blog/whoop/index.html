<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="light">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>HRV and the WHOOP Recovery Model: Estimating Feature Importance | Wyatt Johnston</title>
<meta name="keywords" content="machine learning, health">
<meta name="description" content="Heart rate variability (HRV) is the primary metric that the WHOOP fitness band uses to calculate your recovery. In this article I look at just how much HRV contributes to recovery, plus how a high HRV variance can make things tricky.
What is a WHOOP Recovery Score
The WHOOP fitness band is a product that tracks your activity throughout the day by measuring primarily your heart rate. In addition, and more importantly, it tracks your recovery during sleep. The WHOOP website (and my personal experience) will tell you HRV is the primary contributer to calculating recovery. What exactly HRV is and why it&rsquo;s so important is something I surely will explain worse than WHOOP themselves, so find out more about that here.">
<meta name="author" content="Wyatt Johnston">
<link rel="canonical" href="https://wyatt-johnston.com/blog/whoop/">
<link crossorigin="anonymous" href="https://wyatt-johnston.com/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://wyatt-johnston.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://wyatt-johnston.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://wyatt-johnston.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://wyatt-johnston.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://wyatt-johnston.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://wyatt-johnston.com/blog/whoop/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    }

</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.27/dist/katex.min.css" integrity="sha384-Pu5+C18nP5dwykLJOhd2U4Xen7rjScHN/qusop27hdd2drI+lL5KvX7YntvT8yew" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.27/dist/katex.min.js" integrity="sha384-2B8pfmZZ6JlVoScJm/5hQfNS2TI/6hPqDZInzzPc8oHpN5SgeNOf4LzREO6p5YtZ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.27/dist/contrib/auto-render.min.js" integrity="sha384-hCXGrW6PitJEwbkoStFjeJxv+fSOOQKOPbJxSfM6G5sWZjAyWhXiTIIAmQqnlLlh" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>


<meta property="og:title" content="Wyatt Johnston" />
<meta property="og:description" content="PhD student in Operations Research at UT Austin" />
<meta property="og:image" content="https://wyatt-johnston.com/images/preview.png" />
<meta property="og:url" content="https://wyatt-johnston.com/" />
<meta property="og:type" content="website" />


<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://wyatt-johnston.com/images/preview.png" />
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://wyatt-johnston.com/" accesskey="h" title="Wyatt Johnston (Alt + H)">
                <img src="https://wyatt-johnston.com/favicon.ico" alt="" aria-label="logo"
                    height="44">Wyatt Johnston</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://wyatt-johnston.com/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://wyatt-johnston.com/blog/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://wyatt-johnston.com/research/" title="Research">
                    <span>Research</span>
                </a>
            </li>
            <li>
                <a href="https://wyatt-johnston.com/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://wyatt-johnston.com/crossword/" title="Crossword">
                    <span>Crossword</span>
                </a>
            </li>
            <li>
                <a href="https://wyatt-johnston.com/tutoring/" title="Tutoring">
                    <span>Tutoring</span>
                </a>
            </li>
            <li>
                <a href="https://wyatt-johnston.com/cv.pdf" title="CV">
                    <span>CV</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      HRV and the WHOOP Recovery Model: Estimating Feature Importance
    </h1>
    <div class="post-meta"><span title='2024-07-11 00:00:00 +0000 UTC'>July 11, 2024</span>

</div>
  </header> 
  <div class="post-content"><p>Heart rate variability (HRV) is the primary metric that the WHOOP fitness band uses to calculate your recovery. In this article I look at just how much HRV contributes to recovery, plus how a high HRV variance can make things tricky.</p>
<h3 id="what-is-a-whoop-recovery-score">What is a WHOOP Recovery Score<a hidden class="anchor" aria-hidden="true" href="#what-is-a-whoop-recovery-score">#</a></h3>
<p>The WHOOP fitness band is a product that tracks your activity throughout the day by measuring primarily your heart rate. In addition, and more importantly, it tracks your recovery during sleep. The WHOOP website (and my personal experience) will tell you HRV is the primary contributer to calculating recovery. What exactly HRV is and why it&rsquo;s so important is something I surely will explain worse than WHOOP themselves, so find out more about that <a href="https://www.whoop.com/us/en/thelocker/heart-rate-variability-hrv/">here</a>.</p>
<p>Luckily WHOOP allows you to export your data, which includes a daily value for the metrics it tracks. These include resting heart rate, blood oxygen %, energy burned in calories, time in bed, light sleep, REM sleep, and more. All of these features, including HRV, are presumably inputs to the model that calculates recovery score. By using this data, something of a crude recreation of the recovery score model can be made. Of course it won&rsquo;t be perfect, but by using data from both myself and a friend, it suffices to provide some useful insight as to how HRV plays its part.</p>
<h3 id="investigating-the-features">Investigating the Features<a hidden class="anchor" aria-hidden="true" href="#investigating-the-features">#</a></h3>
<p>The plan is to create a few models that replicate the WHOOP recovery score well enough, and then investigate how important each of the features were in those models. I make a linear model, a GBM model, and an SVR model and then use permutation importance to look at each of the features. You can see everything in more detail on Github. I don&rsquo;t link my own data because that feels sort of weird to put online, but if you are a WHOOP user you can put the filepath to your own &ldquo;phisiological_cycles.csv&rdquo; from the WHOOP data export.</p>
<p>The results from each model using my personal data set are summarized here:</p>
<div style="display: flex; justify-content: space-around; align-items: center;">
    <div style="text-align: center;">
        <img src="https://wyatt-johnston.com/images/whoop/dub_whoop_linear.png" alt="Linear Model" style="max-width: 80%; height: auto;">
        <div style="margin-top: 8px; font-size: 14px; color: #333;">Linear Model</div>
    </div>
    <div style="text-align: center;">
        <img src="https://wyatt-johnston.com/images/whoop/dub_whoop_gbm.png" alt="Gradient Boosting Machine" style="max-width: 80%; height: auto;">
        <div style="margin-top: 8px; font-size: 14px; color: #333;">Gradient Boosting Machine</div>
    </div>
    <div style="text-align: center;">
        <img src="https://wyatt-johnston.com/images/whoop/dub_whoop_svr.png" alt="Support Vector Regression" style="max-width: 80%; height: auto;">
        <div style="margin-top: 8px; font-size: 14px; color: #333;">Support Vector Regression</div>
    </div>
</div>
<p>It&rsquo;s worth noting the RMSE of the three models was 70, 36, and 36, respectively, which indicatees the WHOOP model was recreated rather effectively.</p>
<h3 id="the-potential-problem-with-a-high-hrv-variance">The (Potential) Problem With a High HRV Variance<a hidden class="anchor" aria-hidden="true" href="#the-potential-problem-with-a-high-hrv-variance">#</a></h3>
<p>What&rsquo;s unique, and potentially misleading, about my particular data is that my HRV has a very high variance. I assume this is partially genetic and partially due to, let&rsquo;s say, lifestyle choices. Because an n=1 sample size is bad practice, I also use another WHOOP user&rsquo;s data to assemble a doubly robust n=2 sample size. For reference, this WHOOP user&rsquo;s HRV variance is calculated to be 303.3, whereas mine is 1981.2. I used the same methods as before on the lower variance HRV dataset, and here are the results:</p>
<div style="display: flex; justify-content: space-around; align-items: center;">
    <div style="text-align: center;">
        <img src="https://wyatt-johnston.com/images/whoop/kev_whoop_linear.png" alt="Linear Model" style="max-width: 80%; height: auto;">
        <div style="margin-top: 8px; font-size: 14px; color: #333;">Linear Model</div>
    </div>
    <div style="text-align: center;">
        <img src="https://wyatt-johnston.com/images/whoop/kev_whoop_gbm.png" alt="Gradient Boosting Machine" style="max-width: 80%; height: auto;">
        <div style="margin-top: 8px; font-size: 14px; color: #333;">Gradient Boosting Machine</div>
    </div>
    <div style="text-align: center;">
        <img src="https://wyatt-johnston.com/images/whoop/kev_whoop_svr.png" alt="Support Vector Regression" style="max-width: 80%; height: auto;">
        <div style="margin-top: 8px; font-size: 14px; color: #333;">Support Vector Regression</div>
    </div>
</div>
<p>With this data set, the RMSE of the three models was 98, 115, and 115, respectively. What this leads me to believe is that as HRV deviates much higher or much lower than your average, it dominates the recovery score more and more. Hence why the higher variance data set had more success calcuating recovery score - it could rely almost entirely on HRV. When the HRV is not changing so drastically, other factors contribute more which are more difficult to pick up in a recreation of the recovery model.</p>
<p>This discrepancy is what originally led me to conduct this study: I noticed my HRV can hit high extremes, and my recovery would correspondingly be high despite poor or little sleep. But is that an accurate representation of my body&rsquo;s recovery? Or is it just inflated because the variance of my HRV is greater?</p>
<p>I am sure more considerations are taken into calculating the recovery score than I could possibly be aware of. I would assume that data beyond just one value per day is involved in the model as well. Perhaps the HRV and other features are taken at different points throughout the day which aren&rsquo;t available in the data export. Regardless, it&rsquo;s certain a high HRV is the preeminent factor in a good recovery score. Whether or not WHOOP is accurately capturing your body&rsquo;s recovery if your HRV varies greatly, I&rsquo;m not as sure.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://wyatt-johnston.com/tags/machine-learning/">Machine Learning</a></li>
      <li><a href="https://wyatt-johnston.com/tags/health/">Health</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://wyatt-johnston.com/">Wyatt Johnston</a></span> Â· 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><div class="footer-social-icons" style="margin-top: 1rem; text-align: center;">
  <a href="mailto:wyattdj2@illinois.edu" target="_blank" aria-label="Email" style="margin: 0 0.5rem;">
    
  </a>
  <a href="https://github.com/wyattj37" target="_blank" aria-label="GitHub" style="margin: 0 0.5rem;">
    
  </a>
  <a href="https://linkedin.com/in/wyatt-d-johnston" target="_blank" aria-label="LinkedIn" style="margin: 0 0.5rem;">
    
  </a>
</div>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
