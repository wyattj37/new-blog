<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>The Birthday Problem for Last Names | Wyatt Johnston</title>
<meta name="keywords" content="statistics, probability">
<meta name="description" content="How large of a group do you need so that the chances of two random people sharing a last name is 50%?">
<meta name="author" content="Wyatt Johnston">
<link rel="canonical" href="http://localhost:1313/posts/the-birthday-problem-for-last-names/">
<link crossorigin="anonymous" href="http://localhost:1313/assets/css/stylesheet.343cc480b9ffc8f04ccbe5e968ad674880cab773ec19905e93033065c1e7a804.css" integrity="sha256-NDzEgLn/yPBMy&#43;XpaK1nSIDKt3PsGZBekwMwZcHnqAQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/the-birthday-problem-for-last-names/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Wyatt Johnston (Alt + H)">Wyatt Johnston</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      The Birthday Problem for Last Names
    </h1>
    <div class="post-meta"><span title='2025-03-01 00:00:00 +0000 UTC'>March 1, 2025</span>&nbsp;·&nbsp;<span>Wyatt Johnston</span>

</div>
  </header> 

  <div class="post-content"><p>How large of a group do you need so that the chances of two random people sharing a last name is 50%?</p>
<p>The <a href="https://en.wikipedia.org/wiki/Birthday_problem">birthday problem</a> “asks for the probability that, in a set of n randomly chosen people, at least two will share the same birthday.” In order to achieve a probability of 50%, only 23 people are needed, which is a surprisingly low number.</p>
<p>Recently I was looking through a class roster and noticed there were 4 Chens out of 90 people in the section. Remembering the birthday problem, I wondered what the probability was in a set of n random people that two would have the same surname. TLDR: with a group of 50 there is about a 50% chance of a shared last name. Before I get into how we come to that result, the data I’ll be using comes from the 2010 US census. The data can be found <a href="https://www.census.gov/topics/population/genealogy/data/2010_surnames.html">here</a>.</p>
<p>The big difference between the birthday problem and the surname problem is that birthdays are (<a href="https://www.panix.com/~murphy/bday.html">more or less</a>) distributed evenly, so the probability of any given birthday being 1/365 is a fine assumption. Surnames, on the other hand, are definitely not evenly distributed. The top 100 names constitute ~17% of the population, the top 1000 constitute ~41%, and the 100,000 most popular names constitute ~87% of all Americans (in 2010). Meanwhile, there were 6.3 million(!) total surnames reported in the 2010 census. In fact, 3.6 million surnames were only reported once. The distribution of names is extremely weighted towards the popular ones.</p>
<p>Here is a visualization of that:</p>
<div style="text-align: center;">
  <img src="http://localhost:1313/images/surnames/top_250.png" style="width:100%;">
</div>
<p>Even the 250th most popular last name (Morrison) has only 1/20th the number of instances as the most popular name (Smith).</p>
<p>Another implication of this is that as you go to the other far end of the distribution, you get lots of names that appear the same number of times. For example, there are 96 surnames that appear exactly 300 times, and there are 1,279 surnames that appear exactly 100 times. Remember, there are also 3.6 million surnames that appear exactly once.
Here is a plot of that relationship for names that appear fewer than 600 times:</p>
<div style="text-align: center;">
  <img src="http://localhost:1313/images/surnames/bottom_600.png" style="width:100%;">
</div>
<p>A few things to realize about this. First of all, the y-axis is a log scale. There are way, way more names that appear once (3.6 million) than appear even 100 times (1,279). Second of all, where is the data between 2 and 99 appearances? Presumably because that would result in a spreadsheet with millions of rows, the US Census Bureau decided they don’t want to include that in the .csv file. Understandable, but a little bit of a hassle moving forward.</p>
<p>My big idea was to simulate this problem. I’ll get into how exactly later, but to do so I need to fill in the 2-99 gap. Here’s what we know from the census data:</p>
<ul>
<li>There were 294,979,229 people sampled in total</li>
<li>The names that appear more than 99 times constitute 265,667,228 people</li>
<li>The names that appear once constitute (about) 3,906,000 people</li>
<li>That leaves us with 25,406,001 total people with 2-99 appearance surnames.</li>
</ul>
<p>Further, we know that:</p>
<ul>
<li>162,253 names appear more than 99 times</li>
<li>6.3 million surnames were recorded in total</li>
<li>3.906 million surnames were recorded once</li>
<li>That leaves us with 6,137,746 surnames in the 2-99 appearance category.</li>
</ul>
<p>So the gap represents 25,406,001 people with 6,137,746 different names. Going forward I will write $a_n$ to represent how many names there are with n appearances. For example, $a_{100}$ = 1,279 because there are 1,279 surnames that appear 100 times. We can write the requirements above as follows:</p>
<p>$$ \sum_{n=2}^{99} n \cdot a_n = 25,406,000 $$  from the total people requirement, and</p>
<p>$$ \sum_{n=2}^{99} a_n = 6,137,746 $$ from the total number of names requirement.</p>
<p>From the second graph the relationship looks pretty exponential, and there are nice closed-form equations we can write for the sums above, so let’s give that a shot.</p>
<p>In general, when
$$a_n=a_1 \cdot r^{n-1}$$
as in a geometric series, it’s true that
$$
\sum_{n=1}^{m} n \cdot a_n = a_1 \frac{1 - (m+1) r^m + m r^{m+1}}{(1 - r)^2}
$$
and, more commonly,
$$
\sum_{n=1}^{m} a_n = a_1 \frac{r^m - 1}{1 - r}
$$
With some algebra, these equations yield that $r = .75841$ and $a_2 = 1.48282$ million given the first two requirements. Let’s see what it looks like in the plot.</p>
<div style="text-align: center;">
  <img src="http://localhost:1313/images/surnames/first_function.png" style="width:100%;">
</div>
<p>So that’s definitely not it. Kind of forgot we would also like $a_{99}$ to be fairly close to 1300. Time to try harder. How about keeping the exponential part and introducing a power law function so that we have
$$a_n= b \cdot n^p \cdot e^{cn}$$
In order to find the parameters b, p, and c we will use scipy for optimization. We would like to minimize the following:
$$ (\frac{\sum_{n=2}^{99} n \cdot a_n - 25,406,000}{25,406,000})^2 + $$
$$ (\frac{\sum_{n=2}^{99} a_n - 6,137,746}{6,137,746})^2 + $$
$$ (\frac{a_{99}-1,300}{1,300})^2 $$
which are just the requirements we listed normalized and squared. Using that, we get $b = 3.546987e6$, $p = -1.9727$, and $c = 0.01141$. Let’s see how that looks:</p>
<div style="text-align: center;">
  <img src="http://localhost:1313/images/surnames/second_function.png" style="width:100%;">
</div>
<p>That’s more like it. The objective function also comes out to nearly 0, meaning our requirements are met almost exactly.</p>
<p>Alright, let’s get back on track. How many people do we need before surnames overlap? To simulate this, a value in “number of appearances” is generated according to what percentage of the population falls in that category. For example, there are 1,279 names that have 100 people each, so that accounts for 127,900 people, or 127,900/294,979,229 = 0.04% of the population. So 0.04% of the time that category is chosen.</p>
<p>Once the category of 100 appearances is chosen, there are 1,279 possible names within that category, so we choose a random number between 1 and 1,279. We store this “person” as person_100_1279. If we choose another person_100_1279 over the course of picking out that sample, that means we have a duplicate. This process is done for samples of many sizes, from 5 to 125. Each sample size is tested 10,000 times, so the number of times a duplicate is found divided by 10,000 represents the probability a group of that many people will contain a duplicate surname.</p>
<p>Here are the results:</p>
<div style="text-align: center;">
  <img src="http://localhost:1313/images/surnames/duplicate_rate.png" style="width:100%;">
</div>
<p>Running more tests around where the curve appears to cross the red line, it looks to be almost exactly 50 people needed for a 50% chance that there will be a shared last name. Kind of a neat coincidence.</p>
<p>On a practical note, that number is for a completely random group of people selected. The groups that people tend to find themselves in, on the other hand, probably are not a random slice of the American population. You’re probably around people that are more like you than a random sampling of Americans. If that increases the similarity of last names, which I think it would, my guess is that the 50 number should be lower in practice.</p>
<p>The results seem much more intuitive to me than the birthday problem/paradox. In a group of 20 random people, a last name being shared about 10% of the time feels about right. Or, in a group of 100 people, just over a 90% chance of a shared last name also feels natural.</p>
<p>The census data also has what percentage of each name is from different racial groups. An interesting expansion of this could be to mimic smaller communities, like states or towns, by weighting the frequency names are chosen to match the demographics of the community.</p>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/statistics/">Statistics</a></li>
      <li><a href="http://localhost:1313/tags/probability/">Probability</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">Wyatt Johnston</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
